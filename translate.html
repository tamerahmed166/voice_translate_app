<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مترجم الصوت الذكي - Voice Translator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#137fec">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Inter%3Awght%40400%3B500%3B700%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Amiri:wght@400;700&family=Noto+Sans+Arabic:wght@300;400;600;700&display=swap" rel="stylesheet">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="مترجم الصوت">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style type="text/tailwindcss">
        :root {
            --primary-color: #137fec;
        }
    </style>
    <style>
        body {
            min-height: max(884px, 100dvh);
            font-family: 'Cairo', 'Inter', 'Noto Sans', sans-serif;
        }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        /* Custom styles for Arabic text */
        .arabic-text {
            font-family: 'Cairo', 'Noto Sans Arabic', sans-serif;
        }
        /* Hide elements initially for camera support check */
        .camera-option {
            display: block;
        }
        .camera-option.hidden {
            display: none !important;
        }
    </style>
</head>
<body class="bg-gray-50 arabic-text">
    <div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden" style='font-family: "Cairo", "Inter", "Noto Sans", sans-serif;'>
        <div class="flex flex-col">
            <!-- Header -->
            <header class="bg-white p-4">
                <div class="flex items-center justify-between">
                    <a href="index.html" class="flex h-12 w-12 items-center justify-center rounded-full hover:bg-gray-100" title="العودة للرئيسية">
                        <span class="material-symbols-outlined text-gray-600">home</span>
                    </a>
                    <h1 class="text-xl font-bold text-gray-900">مترجم الصوت</h1>
                    <a href="settings.html" class="flex h-12 w-12 items-center justify-center rounded-full hover:bg-gray-100" title="الإعدادات">
                        <span class="material-symbols-outlined text-gray-600">settings</span>
                    </a>
                </div>
            </header>

            <!-- Main Content -->
            <main class="flex-grow p-4 space-y-6 pb-8">
                <!-- Language Selector -->
                <div class="flex items-center justify-center p-4 rounded-lg bg-white border border-gray-200 shadow-sm">
                    <div class="flex-1 text-center">
                        <select id="source-lang" class="w-full text-center font-semibold text-[var(--primary-color)] py-2 border-b-2 border-[var(--primary-color)] bg-transparent focus:outline-none">
                            <option value="ar">العربية</option>
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                            <option value="pt">Português</option>
                            <option value="ru">Русский</option>
                            <option value="ja">日本語</option>
                            <option value="ko">한국어</option>
                            <option value="zh">中文</option>
                            <option value="hi">हिन्दी</option>
                            <option value="tr">Türkçe</option>
                            <option value="nl">Nederlands</option>
                            <option value="sv">Svenska</option>
                            <option value="da">Dansk</option>
                            <option value="no">Norsk</option>
                            <option value="fi">Suomi</option>
                            <option value="pl">Polski</option>
                            <option value="cs">Čeština</option>
                            <option value="hu">Magyar</option>
                            <option value="ro">Română</option>
                            <option value="bg">Български</option>
                            <option value="hr">Hrvatski</option>
                            <option value="sk">Slovenčina</option>
                            <option value="sl">Slovenščina</option>
                            <option value="et">Eesti</option>
                            <option value="lv">Latviešu</option>
                            <option value="lt">Lietuvių</option>
                            <option value="mt">Malti</option>
                            <option value="ga">Gaeilge</option>
                            <option value="cy">Cymraeg</option>
                            <option value="eu">Euskera</option>
                            <option value="ca">Català</option>
                            <option value="gl">Galego</option>
                            <option value="is">Íslenska</option>
                            <option value="mk">Македонски</option>
                            <option value="sq">Shqip</option>
                            <option value="sr">Српски</option>
                            <option value="bs">Bosanski</option>
                            <option value="me">Crnogorski</option>
                            <option value="he">עברית</option>
                            <option value="fa">فارسی</option>
                            <option value="ur">اردو</option>
                            <option value="bn">বাংলা</option>
                            <option value="ta">தமிழ்</option>
                            <option value="te">తెలుగు</option>
                            <option value="ml">മലയാളം</option>
                            <option value="kn">ಕನ್ನಡ</option>
                            <option value="gu">ગુજરાતી</option>
                            <option value="pa">ਪੰਜਾਬੀ</option>
                            <option value="or">ଓଡ଼ିଆ</option>
                            <option value="as">অসমীয়া</option>
                            <option value="ne">नेपाली</option>
                            <option value="si">සිංහල</option>
                            <option value="my">မြန်မာ</option>
                            <option value="km">ខ្មែរ</option>
                            <option value="lo">ລາວ</option>
                            <option value="ka">ქართული</option>
                            <option value="hy">Հայերեն</option>
                            <option value="az">Azərbaycan</option>
                            <option value="kk">Қазақ</option>
                            <option value="ky">Кыргыз</option>
                            <option value="uz">O'zbek</option>
                            <option value="tg">Тоҷикӣ</option>
                            <option value="mn">Монгол</option>
                            <option value="th">ไทย</option>
                            <option value="vi">Tiếng Việt</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="ms">Bahasa Melayu</option>
                            <option value="tl">Filipino</option>
                            <option value="sw">Kiswahili</option>
                            <option value="am">አማርኛ</option>
                            <option value="yo">Yorùbá</option>
                            <option value="ig">Igbo</option>
                            <option value="ha">Hausa</option>
                            <option value="zu">isiZulu</option>
                            <option value="af">Afrikaans</option>
                        </select>
                    </div>
                    <div class="p-2 rounded-full bg-gray-100 mx-2">
                        <button id="swap-languages" data-action="swap" title="تبديل اللغات">
                            <span class="material-symbols-outlined text-gray-600">swap_horiz</span>
                        </button>
                    </div>
                    <div class="flex-1 text-center">
                        <select id="target-lang" class="w-full text-center font-semibold text-gray-500 py-2 bg-transparent focus:outline-none">
                            <option value="en">English</option>
                            <option value="ar">العربية</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                            <option value="de">Deutsch</option>
                            <option value="it">Italiano</option>
                            <option value="pt">Português</option>
                            <option value="ru">Русский</option>
                            <option value="ja">日本語</option>
                            <option value="ko">한국어</option>
                            <option value="zh">中文</option>
                            <option value="hi">हिन्दी</option>
                            <option value="tr">Türkçe</option>
                            <option value="nl">Nederlands</option>
                            <option value="sv">Svenska</option>
                            <option value="da">Dansk</option>
                            <option value="no">Norsk</option>
                            <option value="fi">Suomi</option>
                            <option value="pl">Polski</option>
                            <option value="cs">Čeština</option>
                            <option value="hu">Magyar</option>
                            <option value="ro">Română</option>
                            <option value="bg">Български</option>
                            <option value="hr">Hrvatski</option>
                            <option value="sk">Slovenčina</option>
                            <option value="sl">Slovenščina</option>
                            <option value="et">Eesti</option>
                            <option value="lv">Latviešu</option>
                            <option value="lt">Lietuvių</option>
                            <option value="mt">Malti</option>
                            <option value="ga">Gaeilge</option>
                            <option value="cy">Cymraeg</option>
                            <option value="eu">Euskera</option>
                            <option value="ca">Català</option>
                            <option value="gl">Galego</option>
                            <option value="is">Íslenska</option>
                            <option value="mk">Македонски</option>
                            <option value="sq">Shqip</option>
                            <option value="sr">Српски</option>
                            <option value="bs">Bosanski</option>
                            <option value="me">Crnogorski</option>
                            <option value="he">עברית</option>
                            <option value="fa">فارسی</option>
                            <option value="ur">اردو</option>
                            <option value="bn">বাংলা</option>
                            <option value="ta">தமிழ்</option>
                            <option value="te">తెలుగు</option>
                            <option value="ml">മലയാളം</option>
                            <option value="kn">ಕನ್ನಡ</option>
                            <option value="gu">ગુજરાતી</option>
                            <option value="pa">ਪੰਜਾਬੀ</option>
                            <option value="or">ଓଡ଼ିଆ</option>
                            <option value="as">অসমীয়া</option>
                            <option value="ne">नेपाली</option>
                            <option value="si">සිංහල</option>
                            <option value="my">မြန်မာ</option>
                            <option value="km">ខ្មែរ</option>
                            <option value="lo">ລາວ</option>
                            <option value="ka">ქართული</option>
                            <option value="hy">Հայերեն</option>
                            <option value="az">Azərbaycan</option>
                            <option value="kk">Қазақ</option>
                            <option value="ky">Кыргыз</option>
                            <option value="uz">O'zbek</option>
                            <option value="tg">Тоҷикӣ</option>
                            <option value="mn">Монгол</option>
                            <option value="th">ไทย</option>
                            <option value="vi">Tiếng Việt</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="ms">Bahasa Melayu</option>
                            <option value="tl">Filipino</option>
                            <option value="sw">Kiswahili</option>
                            <option value="am">አማርኛ</option>
                            <option value="yo">Yorùbá</option>
                            <option value="ig">Igbo</option>
                            <option value="ha">Hausa</option>
                            <option value="zu">isiZulu</option>
                            <option value="af">Afrikaans</option>
                        </select>
                    </div>
                </div>

                <!-- Input Section -->
                <div class="rounded-xl bg-white shadow-sm border border-gray-200">
                    <div class="p-4">
                        <textarea id="source-text" class="form-textarea w-full resize-none border-none bg-white p-0 text-gray-800 placeholder:text-gray-400 focus:ring-0 text-2xl" placeholder="اكتب النص هنا أو استخدم الميكروفون..." rows="4"></textarea>
                        <div class="text-sm text-gray-400 mt-2">
                            <span id="char-count">0</span> / 5000
                        </div>
                    </div>
                    <div class="flex items-center justify-between border-t border-gray-200 p-2">
                        <div class="flex items-center space-x-1">
                            <button id="mic-btn" data-action="mic" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-gray-100" title="تسجيل صوتي">
                                <span class="material-symbols-outlined text-gray-600">mic</span>
                                <span class="mic-text sr-only">اضغط للتسجيل</span>
                            </button>
                            <div class="image-capture-container relative">
                                <button id="image-capture-btn" data-action="camera" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-blue-50 hover:text-blue-600 transition-colors" title="التقاط أو تحميل صورة">
                                    <span class="material-symbols-outlined text-gray-600">photo_camera</span>
                                </button>
                                <div id="image-capture-menu" class="image-capture-menu hidden absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[200px]">
                                    <div class="menu-header p-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-t-lg">
                                        <span class="material-symbols-outlined mr-2">photo_camera</span>
                                        <span class="font-semibold">خيارات الصورة</span>
                                    </div>
                                    <div class="menu-item p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100" data-action="upload">
                                        <span class="material-symbols-outlined text-blue-600 mr-2">upload</span>
                                        <div class="flex flex-col">
                                            <span class="font-medium">تحميل صورة</span>
                                            <span class="text-xs text-gray-500">من معرض الصور</span>
                                        </div>
                                    </div>
                                    <div class="menu-item p-3 hover:bg-green-50 cursor-pointer border-b border-gray-100" data-action="camera">
                                        <span class="material-symbols-outlined text-green-600 mr-2">photo_camera</span>
                                        <div class="flex flex-col">
                                            <span class="font-medium">التقاط صورة</span>
                                            <span class="text-xs text-gray-500">باستخدام الكاميرا</span>
                                        </div>
                                    </div>
                                    <div class="menu-item p-3 hover:bg-purple-50 cursor-pointer" data-action="smart-scan">
                                        <span class="material-symbols-outlined text-purple-600 mr-2">auto_awesome</span>
                                        <div class="flex flex-col">
                                            <span class="font-medium">مسح ذكي</span>
                                            <span class="text-xs text-gray-500">كشف وترجمة تلقائية</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="clear-btn" data-action="clear" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-gray-100" title="مسح النص">
                            <span class="material-symbols-outlined text-gray-600">close</span>
                        </button>
                    </div>
                </div>

                <!-- Output Section -->
                <div class="rounded-xl bg-[var(--primary-color)] text-white shadow-sm">
                    <div class="p-4 flex flex-col gap-4">
                        <div id="translated-text" class="text-2xl min-h-[80px] flex-1">الترجمة ستظهر هنا...</div>
                        <button id="add-favorite" data-action="save" class="flex items-center justify-center gap-2 bg-white text-[var(--primary-color)] font-bold py-3 px-6 rounded-lg hover:bg-gray-100 transition-colors w-full text-lg shadow">
                            <span class="material-symbols-outlined">bookmark_add</span>
                            حفظ الترجمة
                        </button>
                    </div>
                    <div class="flex items-center justify-between border-t border-white/20 p-2">
                        <div class="flex items-center space-x-1">
                            <button id="speak-btn" data-action="speak" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-white/10" title="نطق الترجمة">
                                <span class="material-symbols-outlined">volume_up</span>
                            </button>
                            <button id="copy-btn" data-action="copy" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-white/10" title="نسخ الترجمة">
                                <span class="material-symbols-outlined">content_copy</span>
                            </button>
                            <button data-action="favorite" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-white/10" title="إضافة للمفضلة">
                                <span class="material-symbols-outlined">star</span>
                            </button>
                        </div>
                        <button data-action="fullscreen" class="flex h-10 w-10 items-center justify-center rounded-md hover:bg-white/10" title="ملء الشاشة">
                            <span class="material-symbols-outlined">fullscreen</span>
                        </button>
                    </div>
                </div>

                <!-- Status Bar -->
                <div id="status" class="text-center text-sm text-gray-600 py-2">
                    جاهز للاستخدام
                </div>

                <!-- Saved Phrases -->
                <div class="space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">العبارات المحفوظة</h2>
                    <div id="favorites-list" class="grid grid-cols-2 gap-3">
                        <div class="rounded-lg bg-white p-3 border border-gray-200 shadow-sm">
                            <p class="font-medium text-gray-800">Hello</p>
                            <p class="text-gray-500">مرحبا</p>
                        </div>
                        <div class="rounded-lg bg-white p-3 border border-gray-200 shadow-sm">
                            <p class="font-medium text-gray-800">How are you?</p>
                            <p class="text-gray-500">كيف حالك؟</p>
                        </div>
                        <div class="rounded-lg bg-white p-3 border border-gray-200 shadow-sm">
                            <p class="font-medium text-gray-800">Thank you</p>
                            <p class="text-gray-500">شكرا لك</p>
                        </div>
                        <div class="flex items-center justify-center rounded-lg bg-white p-3 border border-gray-200 shadow-sm text-gray-500 hover:bg-gray-100 cursor-pointer">
                            <span class="material-symbols-outlined">arrow_forward</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>


    </div>

    <!-- Hidden file input for image upload -->
    <input type="file" id="image-input" accept="image/*" capture="environment" style="display: none;">

    <!-- Tesseract.js for OCR functionality -->
    <script src="https://unpkg.com/tesseract.js@v4.1.1/dist/tesseract.min.js"></script>
    <script src="script.js"></script>
</body>
</html>